description: 
  This profile sets minimum expectations for the CarePlan resource to record
  search and fetch assessment and plan of treatment data associated with a patient.
  It identifies which core elements, extensions, vocabularies and value sets
  SHALL be present in the resource when using this profile.

elements:
  subject: { required: true, refs: [ ./Patient ] }
  text:
    elements:
      status:
        required: true
        valueset:
          id: narrative-status
          concepts:
           - code: additional
             display: additional
             definition: The contents of the narrative may contain additional information not found in the structured data. Note that there is no computable way to determine what the extra information is, other than by human inspection.
           - code: generated
             display: generated
             definition: The contents of the narrative are entirely generated from the core elements in the content.
  status:
    required: true
    type: code
    valueset: { id: 'fhir:request-status' }
  intent:
    required: true
    valueset: { id: 'fhir:care-plan-intent' } 
  category:
    contains: { coding: [{ system: "http://hl7.org/fhir/us/core/CodeSystem/careplan-category", code: assess-plan }] }
  extension:
    type: Extension
    collection: true
    description: Extension Slice:Unordered, Open by value:url
    elements: {family-member-history-genetics-parent: {collection: true,
                                                       type: Complex,
                                                       description: Mother(s) & Father(s) - genetic & other,
                                                       url: http://hl7.org/fhir/StructureDefinition/family-member-history-genetics-parent,
                                                       valueCode: VV},
               family-member-history-genetics-sibling: {collection: true,
                                                        type: Complex,
                                                        description: natural brother(s) & natural sister(s) - genetic & other,
                                                        url: http://hl7.org/fhir/StructureDefinition/family-member-history-genetics-sibling,
                                                        valueCode: BB},
               family-member-history-genetics-observation: {collection: true,
                                                            type: Reference(Observation),
                                                            description: Genetic markers, ethnicity, etc.,
                                                            url: http://hl7.org/fhir/StructureDefinition/family-member-history-genetics-observation,
                                                            valueCode: CC}
}
api:
  search:
    params:
      patient: {required: true}
      category: {required: true}
      date: {required: true}
